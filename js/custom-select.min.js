$(function(){function t(t){this.selectbox=t instanceof $?t:$(t),this.selectAttributes(),this.makeSelectors(this.select.id),this.initialize(),this.select.isDisabled?$("body").on("click",this.uiBox,function(t){t.preventDefault()}):($("body").on("click",this.uiBox,{container:this.container},this.displayClickHandler),$("body").on("click",{container:this.container,listoptions:this.listoptions},this.clickOutHandler),$("body").on("focus",this.handle+" ,"+this.listoptions,{container:this.container},this.focusHandler),$("body").on("blur",this.handle+", "+this.listoptions,{container:this.container,containerId:this.containerId,customSelectElement:this.customSelectElement},this.blurHandler),$("body").on("mouseover",this.listoptions,{listoptions:this.listoptions,selectedOption:this.selectedOption,optionId:this.optionId},this.mouseOverHandler),$("body").on("mouseout",this.containerId+" .dropdown",{listoptions:this.listoptions,customSelectElement:this.customSelectElement},this.mouseOutHandler),$("body").on("keydown",this.handle,{container:this.container,optionId:this.optionId,listoptions:this.listoptions,selectedOption:this.selectedOption,customSelectElement:this.customSelectElement},this.displayKeyDownHandler),$("body").on("keydown",this.containerId+" .highlighted",{selectObj:this},this.selectItemKeydownHandler),$("body").on("click",this.containerId+" .highlighted",{selectObj:this},this.selectItemClickHandler),$("body").on("click",this.label,{handle:this.handle},this.selectLabelClickHandler),$("body").on("change","#"+this.select.id+"-old",{selectObj:this},this.htmlSelectChangeHandler))}function e(){this.backspace=8,this.tab=9,this.enter=13,this.esc=27,this.space=32,this.pageup=33,this.pagedown=34,this.end=35,this.home=36,this.up=38,this.down=40,this.del=46}t.prototype.initialize=function(){$(this.containerId).length&&$(this.containerId).remove();var t='<ul class="dropdown" role="listbox" aria-live="polite" aria-expanded="true">',e=this;this.select.options.each(function(i){t+='<li role="option" data-option-array-index="'+(i+1)+'" data-value="'+$(this).val()+'"',$(this).is(":selected")?(t+=' aria-selected="true" class="highlighted selected" id="'+e.select.id+'-option"',e.select.displayText=$(this).text()):t+=' aria-selected="false"',t+=">"+$(this).text()+"</li>"}),t+="</ul>";var i="";this.select.isDisabled?(i='<div class="custom-select-container" id="custom-'+this.select.id+'-container">',i+='<a tabindex="-1" class="custom-select-display disabled"><span class="custom-select-display-text">'+this.select.displayText+'</span><div class="custom-select-btn-outer"><b class="custom-select-btn"></b></div></a>',i+="</div>"):(i='<div class="custom-select-container" id="custom-'+this.select.id+'-container">',i+='<input type="hidden" id="'+this.select.id+'" name="'+this.select.name+'" value="'+this.select.value+'" class="custom-select-input-fields custom-select-val-field"/>',i+='<input type="text" value="'+this.select.displayText+'" tabindex="0" class="custom-select-input-fields custom-select-input" id="custom-'+this.select.id+'" role="combobox" aria-autocomplete="listbox" aria-labelledby="'+this.select.id+'-label" aria-activedescendant="'+this.select.id+'-option" />',i+='<a tabindex="-1" class="custom-select-display"><span class="custom-select-display-text">'+this.select.displayText+'</span><div class="custom-select-btn-outer"><b class="custom-select-btn"></b></div></a>',i+=t,i+="</div>"),this.selectbox.next(".custom-select-filler").remove(),this.selectbox.after(i),this.selectbox.attr("disabled","disabled").attr("id",this.select.id+"-old"),this.container=$(this.containerId),this.customSelectElement=$(this.handle),this.container.width(this.select.width),this.optionId=this.select.id+"-option"},t.prototype.selectAttributes=function(){var t=this.selectbox;this.select={width:t.outerWidth(),options:t.children(),value:t.val(),name:t.attr("name"),id:t.attr("id"),displayText:"Select",isDisabled:t.attr("disabled")}},t.prototype.makeSelectors=function(t){this.containerId="#custom-"+t+"-container",this.selectedOption="#"+t+"-option",this.hidden=this.containerId+" .custom-select-val-field",this.uiBox=this.containerId+" .custom-select-display",this.handle=this.containerId+" .custom-select-input",this.displayText=this.containerId+" .custom-select-display span",this.listoptions=this.containerId+" .dropdown li",this.selected=this.containerId+" .selected",this.label='label[for="'+t+'"]'};var i=new e;t.prototype.displayClickHandler=function(t){t.preventDefault();var e=t.data.container,i=$(this);e.hasClass("expanded")?(e.removeClass("expanded"),i.focus()):(e.addClass("expanded"),e.find(".selected").addClass("highlighted").attr("tabindex",0).focus())},t.prototype.clickOutHandler=function(t){var e=t.data.container,i=t.data.listoptions;-1===$(t.target).parents().index(e)&&(e.removeClass("expanded"),$(i).removeClass("highlighted").attr({id:"",tabindex:"-1"}))},t.prototype.focusHandler=function(t){var e=t.data.container;e.addClass("active")},t.prototype.blurHandler=function(t){var e=t.data.container,i=t.data.containerId,s=t.data.customSelectElement;$(i+" .dropdown li").is(":focus")||s.is(":focus")||e.removeClass("active")},t.prototype.mouseOverHandler=function(t){var e=$(this),i=t.data.listoptions,s=t.data.selectedOption,a=t.data.optionId;$(i).removeClass("highlighted").attr({id:"",tabindex:"-1"}),$(s).attr("id",""),e.addClass("highlighted").attr({id:a,tabindex:"0"}),e.focus()},t.prototype.mouseOutHandler=function(t){{var e=t.data.listoptions;t.data.customSelectElement}$(e).removeClass("highlighted").attr({id:"",tabindex:"-1"})},t.prototype.displayKeyDownHandler=function(t){var e=t.data.container,s=t.data.optionId,a=t.data.listoptions,o=t.data.selectedOption,l=t.data.customSelectElement;if(t.which!==i.tab&&t.keyCode!==i.tab){t.preventDefault();{$(this)}t.which===i.down||t.keyCode===i.down?(e.find(".selected").addClass("highlighted").attr({id:s,tabindex:"0"}).focus(),e.addClass("expanded")):(t.which===i.esc||t.keyCode===i.esc)&&(e.removeClass("expanded"),$(a).removeClass("highlighted").attr({id:"",tabindex:"-1"}),$(o).attr("id",""),l.focus())}},t.prototype.selectItemKeydownHandler=function(t){var e=t.data.selectObj,s=$(this);if(t.stopPropagation(),t.which===i.tab||t.keyCode===i.tab)return e.selectOption(s),void e.closeDropdown();t.preventDefault();var a=s.next(),o=s.prev();(t.which===i.down||t.keyCode===i.down)&&a.length>0?(s.removeClass("highlighted").attr({id:"",tabindex:"-1"}),a.addClass("highlighted").attr({id:e.optionId,tabindex:"0"}).focus()):(t.which===i.up||t.keyCode===i.up)&&o.length>0?(s.removeClass("highlighted").attr({id:"",tabindex:"-1"}),o.addClass("highlighted").attr({id:e.optionId,tabindex:"0"}).focus()):t.which===i.pagedown||t.keyCode===i.pagedown||t.which===i.end||t.keyCode===i.end?(s.removeClass("highlighted").attr({id:"",tabindex:"-1"}),$(e.listoptions).last().addClass("highlighted").attr({id:e.optionId,tabindex:"0"}).focus()):t.which===i.pageup||t.keyCode===i.pageup||t.which===i.home||i.keyCode===i.home?(s.removeClass("highlighted").attr({id:"",tabindex:"-1"}),$(e.listoptions).first().addClass("highlighted").attr({id:e.optionId,tabindex:"0"}).focus()):t.which===i.esc||t.keyCode===i.esc?e.closeDropdown():(t.which===i.enter||t.keyCode===i.enter||t.which===i.space||t.keyCode===i.space)&&(e.selectOption(s),e.closeDropdown())},t.prototype.selectItemClickHandler=function(t){t.preventDefault();var e=$(this),i=t.data.selectObj;i.selectOption(e),i.closeDropdown()},t.prototype.selectLabelClickHandler=function(t){var e=t.data.handle;t.preventDefault(),$(e).focus()},t.prototype.htmlSelectChangeHandler=function(t){var e=t.data.selectObj;e.changeOption(e)},t.prototype.selectOption=function(t){$(this.containerId+" .selected").removeClass("selected").attr("aria-selected","false"),t.addClass("selected").attr("aria-selected","true");var e=t.attr("data-value");this.selectbox.val(e),$(this.displayText).text(t.text()),$(this.hidden).val(e),$(this.handle).val(t.text()),this.customSelectElement.val(t.text()),$(this.hidden).change()},t.prototype.closeDropdown=function(){this.container.removeClass("expanded"),$(this.listoptions).removeClass("highlighted").attr({id:"",tabindex:"-1"}),this.customSelectElement.focus()},t.prototype.changeOption=function(t){this.container.hasClass("active")||(dataValue=t.val(),$(this.selected).removeClass("selected highlighted").attr("aria-selected","false"),$(this.listoptions+'[data-value="'+dataValue+'"]').addClass("selected").attr("aria-selected","true"),textValue=$(this.selector.selected).text(),$(this.displayText).text(textValue),$(this.handle).val(textValue),this.customSelectElement.val(textValue),$(this.hidden).val(dataValue))}});
